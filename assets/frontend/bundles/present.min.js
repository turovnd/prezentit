var pit=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t){e.exports=function(e){return e.log=function(e,t,n,i){for(n=void 0===n?"[prezentit]:":"["+n+"]:",n=n.length<25?n:n.substr(0,22);n.length<24;)n+=" ";t=t||"log",i?e=n+e:(i=e||"undefined",e=n+"%o");try{"console"in window&&window.console[t]&&(i?window.console[t](e,i):window.console[t](e))}catch(e){}},e.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},e.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},e.replace=function(e,t){return e.parentNode.replaceChild(t,e)},e.keys={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,Q:81,I:73,H:72,F:70,C:67,E:69,P:80},e}({})},function(e,t){e.exports=function(e){e.nodes=[],e.btn=null,e.list=null,e.init=function(){if(e.nodes=document.querySelectorAll('[data-toggle="collapse"]'),e.nodes.length>0)for(var i=0;i<e.nodes.length;i++)e.nodes[i].addEventListener("click",t,!1),"true"==e.nodes[i].dataset.opened&&n(e.nodes[i],document.getElementById(e.nodes[i].dataset.area))};var t=function(){e.btn=this,e.list=document.getElementById(e.btn.dataset.area),"false"===e.btn.dataset.opened?n(e.btn,e.list):i(e.btn,e.list)},n=function(e,t){e.dataset.opened="true",t.dataset.height||(t.dataset.height=o(t)),t.style.height=t.dataset.height+"px"},i=function(e,t){e.dataset.opened="false",t.style.height="0"},o=function(e){for(var t=0,n=0;n<e.childNodes.length;n++)e.childNodes[n].className&&(t+=e.childNodes[n].clientHeight);return t};return e}({})},function(e,t){var n=function(){var e=function(e){var t=document.cookie.match(RegExp(e+"=([^;]*)"));return t?decodeURIComponent(t[1]).split("~")[1]:void 0},t=function(e){e=e||{};var t=e.expires;if("number"==typeof t&&t){var n=new Date;n.setTime(n.getTime()+1e3*t),t=e.expires=n}t&&t.toUTCString&&(e.expires=t.toUTCString());var i=encodeURIComponent(e.value),o=e.name+"="+i;for(var s in e)if("name"!=s&&"value"!=s){o+="; "+s;var a=e[s];!0!==a&&(o+="="+a)}document.cookie=o};return{get:e,set:t,remove:function(e){t({name:e,value:"",expires:-1,path:"/"})}}}();e.exports=n},function(e,t){e.exports=function(e){var t=[],n=null,i=function(e){t.push(e);for(var n=0;n<t.length&&t.length>5;)"confirm"!==t[n].type&&"prompt"!==t[n].type?(t[n].close(),t.splice(n,5)):n++};return e.createHolder=function(){var e=pit.draw.node("DIV","notifications-block");return n=document.body.appendChild(e),e},e.notify=function(e){function t(e){if(e&&e.message){e.type=e.type||"alert",e.time=1e3*e.time||3e3;var t=pit.draw.node("DIV","notification"),n=pit.draw.node("DIV","notification__message"),i=pit.draw.node("INPUT","notification__input"),o=pit.draw.node("SPAN","notification__confirm-btn"),g=pit.draw.node("SPAN","notification__cancel-btn"),h=pit.draw.node("DIV","notification__backdrop");n.innerHTML=e.message,e.size&&t.classList.add("notification--"+e.size),t.classList.add("notification--"+e.type),t.appendChild(n),"prompt"!==e.type&&"confirm"!==e.type||(o.textContent=e.confirmText||"ОК",g.textContent=e.cancelText||"Отмена",p=document.body.appendChild(h),p.addEventListener("click",f),"prompt"===e.type&&t.appendChild(i),t.appendChild(o),e.showCancelButton&&(t.appendChild(g),g.addEventListener("click",f)),o.addEventListener("click",m)),"prompt"!==e.type&&"confirm"!==e.type&&window.setTimeout(s,e.time),a=t,c=e.type,u=e.validation,l=e.confirm,r=e.cancel,d=i}}function o(){n.appendChild(a),d.focus(),"prompt"===c||"confirm"===c?(a.classList.add("notification--animation-in"),window.setTimeout(function(){a.classList.remove("notification--animation-in")},400)):(a.classList.add("notification--animation-in-down"),window.setTimeout(function(){a.classList.remove("notification--animation-in-down")},400)),i({type:c,close:s})}function s(){"prompt"===c||"confirm"===c?a.classList.add("notification--animation-out"):a.classList.add("notification--animation-in-up"),window.setTimeout(function(){a.remove(),p&&p.remove()},400)}var a=null,r=null,c=null,l=null,d=null,p=null,u=null,m=function(){if(u||s(),"function"==typeof l)return"prompt"===c?void l(d.value):void l()},f=function(){s(),"function"==typeof r&&r()};return e&&(t(e),o()),{create:t,send:o,close:s}},e.clear=function(){n=null,t=[]},e}({})},function(e,t){},,,,,function(e,t){e.exports=function(e){function t(t){if(g=document.getElementsByClassName("presentation__aside-open")[0],h=document.getElementById("toggleInstruction"),_=document.getElementsByClassName("presentation")[0],v=document.getElementsByClassName("presentation__slide"),w=window.location.pathname.split("/")[3],E=document.getElementsByClassName("presentation__navigation-btn--right")[0],C=document.getElementsByClassName("presentation__navigation-btn--left")[0],L=document.getElementsByClassName("presentation__progress-bar")[0],x=JSON.parse(document.getElementById("slides_order").value),g&&!t.aside)g.remove(),document.getElementsByClassName("presentation__aside")[0].remove();else{g.addEventListener("click",c);for(var i=document.getElementsByClassName("presentation__aside-link"),s=0;s<i.length;s++)i[s].addEventListener("click",d);document.getElementsByClassName("presentation__slides")[0].addEventListener("click",l)}if(E&&t.slideNavigation?E.addEventListener("click",e.toNextSlide):E.remove(),C&&t.slideNavigation?C.addEventListener("click",e.toPrevSlide):C.remove(),t.toggleAnswers)for(var a=document.getElementsByClassName("slide-choices__action-btn"),s=0;s<a.length;s++)a[s].addEventListener("click",o);t.keyboard&&document.addEventListener("keydown",f),pit.cookies.get("cur_slide")&&pit.cookies.get("cur_slide").match(new RegExp(w))?(y=parseInt(pit.cookies.get("cur_slide").replace(window.location.pathname.split("/")[3],"")),x.indexOf(y)||(y=x[0])):y=x[0],p(),n()}function n(){b=[];for(var e=document.getElementsByClassName("slide-choices"),t=0;t<e.length;t++){for(var n,o,r,c=[],l=e[t].getElementsByClassName("slide-choices__option-wrapper"),d=null,p=[],u=a(l),m=0;m<l.length;m++)n=l[m].getElementsByClassName("slide-choices__option-score")[0],o=l[m].getElementsByClassName("slide-choices__option-image")[0],r=l[m].getElementsByClassName("slide-choices__option-bar")[0],d={wrapper:l[m],score:{wrapper:n,score:parseInt(n.innerHTML),bottom:parseInt(0)},img:{wrapper:o,height:o?parseFloat(o.clientWidth):0,bottom:0},bar:{wrapper:r,height:parseFloat(r.clientHeight)}},n.addEventListener("change",i),p.push(d);c={wrapper:e[t],maxScore:u,answers:p,inPercents:parseInt(e[t].getElementsByClassName("results-in-percents")[0].value)},b.push(c),s(c),window.matchMedia("(max-width: 992px)").addListener(function(){s(c)})}}function i(){s(this.closest(".slide-choices__option-wrapper"))}function o(){var e=this,t=this.parentNode.parentNode.getElementsByClassName("slide-choices__content")[0],n=this.parentNode.parentNode.getElementsByClassName("slide-choices__image")[0],i=this.getElementsByClassName("slide-choices__action-icon")[0],o=this.getElementsByClassName("slide-choices__action-text")[0];switch(i.classList.toggle("slide-choices__action-icon--clicked"),e.dataset.status){case"image":o.textContent="Показать результаты",n.classList.remove("hide","fade__in","fade__in--up"),n.classList.add("fade__out--down"),t.classList.remove("hide","fade__in","fade__out--down"),t.classList.add("fade__in--up"),e.dataset.status="result";break;case"result":o.textContent="Показать изображение",n.classList.remove("hide","fade__in","fade__out--down"),n.classList.add("fade__in--up"),t.classList.remove("hide","fade__in","fade__out--down"),t.classList.add("fade__out--down"),e.dataset.status="image"}t.classList.toggle("fade__in--up","fade__out--down")}function s(e){e.maxScore=a(e.wrapper.getElementsByClassName("slide-choices__option-wrapper"));for(var t=0;t<e.answers.length;t++){var n=e.answers[t],i=e.answers[0].wrapper.clientHeight;n.img.height=void 0!==n.img.wrapper?parseFloat(n.img.wrapper.clientWidth/(i/70)):0;var o=void 0!==n.img.wrapper?n.img.height:0,s=0===n.score.score?0:parseFloat(48*n.score.score/e.maxScore-o/2);void 0===n.img.wrapper?(n.score.bottom=12+s,n.bar.height=s):(n.bar.height=s>0?s:0,n.img.bottom=s>0?12+s:12,n.score.bottom=n.img.bottom+o),n.bar.wrapper.style.height=n.bar.height+"vh",n.score.wrapper.style.bottom=n.score.bottom+"vh",n.score.wrapper.textContent=0===e.inPercents?n.score.score:parseInt(n.score.score/r(e.wrapper.getElementsByClassName("slide-choices__option-wrapper"))*100)+"%",void 0!==n.img.wrapper&&(n.img.wrapper.style.bottom=n.img.bottom+"vh")}}function a(e){for(var t=0,n=0,i=0;i<e.length;i++)n=parseInt(e[i].getElementsByClassName("slide-choices__option-score")[0].dataset.score),t=t<n?n:t;return t=0===t?1:t}function r(e){for(var t=0,n=0;n<e.length;n++)t+=parseInt(e[n].getElementsByClassName("slide-choices__option-score")[0].dataset.score);return t=0===t?1:t}function c(){this.classList.add("presentation__aside-open--opened")}function l(){g.classList.contains("presentation__aside-open--opened")&&g.classList.remove("presentation__aside-open--opened")}function d(){this.classList.toggle("presentation__aside-link--opened")}function p(){pit.cookies.set({name:"cur_slide",value:"presentation~"+window.location.pathname.split("/")[3]+y,expires:21600,path:"/"});for(var e=0;e<v.length;e++)e<x.indexOf(y)?(v[e].classList.remove("presentation__slide--active","presentation__slide--after"),v[e].classList.add("presentation__slide--before","presentation__slide--inactive")):e>x.indexOf(y)&&(v[e].classList.remove("presentation__slide--active","presentation__slide--before"),v[e].classList.add("presentation__slide--after","presentation__slide--inactive"));-1!==x.indexOf(y)&&(v[x.indexOf(y)].classList.remove("presentation__slide--after","presentation__slide--before","presentation__slide--inactive"),v[x.indexOf(y)].classList.add("presentation__slide--active"),L.style.width=parseInt(x.indexOf(y)/(v.length-1)*100)+"%"),0===x.indexOf(y)?C.classList.add("hide"):C.classList.remove("hide"),x.indexOf(y)===v.length-1?E.classList.add("hide"):E.classList.remove("hide")}function u(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}function m(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function f(t){var n=t.keyCode;if(n===pit.core.keys.RIGHT||n===pit.core.keys.SPACE)return void e.toNextSlide();if(n===pit.core.keys.LEFT)return void e.toPrevSlide();if(n!==pit.core.keys.Q){if(n===pit.core.keys.I)return void e.toggleInstruction();if(n!==pit.core.keys.H){if(n===pit.core.keys.F)return void e.toggleFullScreen();pit.core.keys.C,n===pit.core.keys.E&&(window.history.pushState("Presentation",window.location),window.location.replace(window.location+"/edit"))}}}var g=null,h=null,_=null,v=null,w=null,y=null,E=null,C=null,L=null,x=null,b=null;return e.addScore=function(e,t){b[e].answers[t].score.score+=1,b[e].answers[t].score.wrapper.dataset.score=b[e].answers[t].score.score,s(b[e])},e.toNextSlide=function(){x.indexOf(y)<v.length-1&&(y=x[x.indexOf(y)+1],p(),pit.core.log("Switch to the next slide","log","presentation"))},e.toPrevSlide=function(){x.indexOf(y)>0&&(y=x[x.indexOf(y)-1],p(),pit.core.log("Switch to the previous slide","log","presentation"))},e.toggleFullScreen=function(){_?"true"===_.dataset.fullscreen?(_.dataset.fullscreen=!1,m()):(_.dataset.fullscreen=!0,u(_)):pit.core.log("Full screen button doesn't exist","error","presentation")},e.toggleInstruction=function(){h?"false"===h.dataset.opened?(h.classList.toggle("hide"),h.classList.contains("hide")||(h.children[1].removeAttribute("data-height"),h.click())):h.click():pit.core.log("Instructions doesn't exist","error","presentation")},e.init=function(e){t(e),pit.core.log("Module loaded","log","presentation")},e}({})},,function(e,t){},,,,,,,function(e,t,n){n(4),n(11),e.exports=function(e){return e.core=n(0),e.cookies=n(2),e.notification=n(3),e.collapse=n(1),e.present=n(9),e}({})}]);