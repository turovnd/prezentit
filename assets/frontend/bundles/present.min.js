var present=function(e){function t(n){if(s[n])return s[n].exports;var i=s[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var s={};return t.m=e,t.c=s,t.i=function(e){return e},t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}({12:function(e,t){e.exports=function(e){function t(t){if(g=document.getElementsByClassName("presentation__aside-open")[0],f=document.getElementById("toggleInstruction"),h=document.getElementsByClassName("presentation")[0],v=document.getElementsByClassName("presentation__slide"),w=window.location.pathname.split("/")[3],E=document.getElementsByClassName("presentation__navigation-btn--right")[0],x=document.getElementsByClassName("presentation__navigation-btn--left")[0],L=document.getElementsByClassName("presentation__progress-bar")[0],b=JSON.parse(document.getElementById("slides_order").value),g&&!t.aside)g.remove(),document.getElementsByClassName("presentation__aside")[0].remove();else{g.addEventListener("click",l);for(var n=document.getElementsByClassName("presentation__aside-link"),o=0;o<n.length;o++)n[o].addEventListener("click",d);document.getElementsByClassName("presentation__slides")[0].addEventListener("click",c)}if(E&&t.slideNavigation?E.addEventListener("click",e.toNextSlide):E.remove(),x&&t.slideNavigation?x.addEventListener("click",e.toPrevSlide):x.remove(),t.toggleAnswers)for(var a=document.getElementsByClassName("slide-choices__action-btn"),o=0;o<a.length;o++)a[o].addEventListener("click",i);t.keyboard&&document.addEventListener("keydown",_),pit.cookies.get("cur_slide")&&pit.cookies.get("cur_slide").match(new RegExp(w))?(y=parseInt(pit.cookies.get("cur_slide").replace(window.location.pathname.split("/")[3],"")),b.indexOf(y)||(y=b[0])):y=b[0],p(),s()}function s(){C=[];for(var e=document.getElementsByClassName("slide-choices"),t=0;t<e.length;t++){for(var s,i,r,l=[],c=e[t].getElementsByClassName("slide-choices__option-wrapper"),d=null,p=[],u=a(c),m=0;m<c.length;m++)s=c[m].getElementsByClassName("slide-choices__option-score")[0],i=c[m].getElementsByClassName("slide-choices__option-image")[0],r=c[m].getElementsByClassName("slide-choices__option-bar")[0],d={wrapper:c[m],score:{wrapper:s,score:parseInt(s.innerHTML),bottom:parseInt(0)},img:{wrapper:i,height:i?parseFloat(i.clientWidth):0,bottom:0},bar:{wrapper:r,height:parseFloat(r.clientHeight)}},s.addEventListener("change",n),p.push(d);l={wrapper:e[t],maxScore:u,answers:p,inPercents:parseInt(e[t].getElementsByClassName("results-in-percents")[0].value)},C.push(l),o(l),window.matchMedia("(max-width: 992px)").addListener(function(){o(l)})}}function n(){o(this.closest(".slide-choices__option-wrapper"))}function i(){var e=this,t=this.parentNode.parentNode.getElementsByClassName("slide-choices__content")[0],s=this.parentNode.parentNode.getElementsByClassName("slide-choices__image")[0],n=this.getElementsByClassName("slide-choices__action-icon")[0],i=this.getElementsByClassName("slide-choices__action-text")[0];switch(n.classList.toggle("slide-choices__action-icon--clicked"),e.dataset.status){case"image":i.textContent="Показать результаты",s.classList.remove("hide","fade__in","fade__in--up"),s.classList.add("fade__out--down"),t.classList.remove("hide","fade__in","fade__out--down"),t.classList.add("fade__in--up"),e.dataset.status="result";break;case"result":i.textContent="Показать изображение",s.classList.remove("hide","fade__in","fade__out--down"),s.classList.add("fade__in--up"),t.classList.remove("hide","fade__in","fade__out--down"),t.classList.add("fade__out--down"),e.dataset.status="image"}t.classList.toggle("fade__in--up","fade__out--down")}function o(e){e.maxScore=a(e.wrapper.getElementsByClassName("slide-choices__option-wrapper"));for(var t=0;t<e.answers.length;t++){var s=e.answers[t],n=e.answers[0].wrapper.clientHeight;s.img.height=void 0!==s.img.wrapper?parseFloat(s.img.wrapper.clientWidth/(n/70)):0;var i=void 0!==s.img.wrapper?s.img.height:0,o=0===s.score.score?0:parseFloat(48*s.score.score/e.maxScore-i/2);void 0===s.img.wrapper?(s.score.bottom=12+o,s.bar.height=o):(s.bar.height=o>0?o:0,s.img.bottom=o>0?12+o:12,s.score.bottom=s.img.bottom+i),s.bar.wrapper.style.height=s.bar.height+"vh",s.score.wrapper.style.bottom=s.score.bottom+"vh",s.score.wrapper.textContent=0===e.inPercents?s.score.score:parseInt(s.score.score/r(e.wrapper.getElementsByClassName("slide-choices__option-wrapper"))*100)+"%",void 0!==s.img.wrapper&&(s.img.wrapper.style.bottom=s.img.bottom+"vh")}}function a(e){for(var t=0,s=0,n=0;n<e.length;n++)s=parseInt(e[n].getElementsByClassName("slide-choices__option-score")[0].dataset.score),t=t<s?s:t;return t=0===t?1:t}function r(e){for(var t=0,s=0;s<e.length;s++)t+=parseInt(e[s].getElementsByClassName("slide-choices__option-score")[0].dataset.score);return t=0===t?1:t}function l(){this.classList.add("presentation__aside-open--opened")}function c(){g.classList.contains("presentation__aside-open--opened")&&g.classList.remove("presentation__aside-open--opened")}function d(){this.classList.toggle("presentation__aside-link--opened")}function p(){pit.cookies.set({name:"cur_slide",value:"presentation~"+window.location.pathname.split("/")[3]+y,expires:21600,path:"/"});for(var e=0;e<v.length;e++)e<b.indexOf(y)?(v[e].classList.remove("presentation__slide--active","presentation__slide--after"),v[e].classList.add("presentation__slide--before","presentation__slide--inactive")):e>b.indexOf(y)&&(v[e].classList.remove("presentation__slide--active","presentation__slide--before"),v[e].classList.add("presentation__slide--after","presentation__slide--inactive"));-1!==b.indexOf(y)&&(v[b.indexOf(y)].classList.remove("presentation__slide--after","presentation__slide--before","presentation__slide--inactive"),v[b.indexOf(y)].classList.add("presentation__slide--active"),L.style.width=parseInt(b.indexOf(y)/(v.length-1)*100)+"%"),0===b.indexOf(y)?x.classList.add("hide"):x.classList.remove("hide"),b.indexOf(y)===v.length-1?E.classList.add("hide"):E.classList.remove("hide")}function u(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}function m(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function _(t){var s=t.keyCode;if(s===pit.core.keys.RIGHT||s===pit.core.keys.SPACE)return void e.toNextSlide();if(s===pit.core.keys.LEFT)return void e.toPrevSlide();if(s!==pit.core.keys.Q){if(s===pit.core.keys.I)return void e.toggleInstruction();if(s!==pit.core.keys.H){if(s===pit.core.keys.F)return void e.toggleFullScreen();pit.core.keys.C,s===pit.core.keys.E&&(window.history.pushState("Presentation",window.location),window.location.replace(window.location+"/edit"))}}}var g=null,f=null,h=null,v=null,w=null,y=null,E=null,x=null,L=null,b=null,C=null;return e.addScore=function(e,t){C[e].answers[t].score.score+=1,C[e].answers[t].score.wrapper.dataset.score=C[e].answers[t].score.score,o(C[e])},e.toNextSlide=function(){b.indexOf(y)<v.length-1&&(y=b[b.indexOf(y)+1],p(),pit.core.log("Switch to the next slide","log","presentation"))},e.toPrevSlide=function(){b.indexOf(y)>0&&(y=b[b.indexOf(y)-1],p(),pit.core.log("Switch to the previous slide","log","presentation"))},e.toggleFullScreen=function(){h?"true"===h.dataset.fullscreen?(h.dataset.fullscreen=!1,m()):(h.dataset.fullscreen=!0,u(h)):pit.core.log("Full screen button doesn't exist","error","presentation")},e.toggleInstruction=function(){f?"false"===f.dataset.opened?(f.classList.toggle("hide"),f.classList.contains("hide")||(f.children[1].removeAttribute("data-height"),f.click())):f.click():pit.core.log("Instructions doesn't exist","error","presentation")},e.init=function(e){t(e),pit.core.log("Module loaded","log","presentation")},e}({})},16:function(e,t){},19:function(e,t,s){s(16),e.exports=function(e){return e.plagin=s(12),e}({})}});