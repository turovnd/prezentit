var pit=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t){e.exports=function(e){return e.log=function(e,t,n,i){for(n=void 0===n?"[prezentit]:":"["+n+"]:",n=n.length<25?n:n.substr(0,22);n.length<24;)n+=" ";t=t||"log",i?e=n+e:(i=e||"undefined",e=n+"%o");try{"console"in window&&window.console[t]&&(i?window.console[t](e,i):window.console[t](e))}catch(e){}},e.insertBefore=function(e,t){e.parentNode.insertBefore(t,e)},e.insertAfter=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},e.replace=function(e,t){return e.parentNode.replaceChild(t,e)},e.keys={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,Q:81,I:73,H:72,F:70,C:67,E:69,P:80},e}({})},function(e,t){e.exports=function(e){e.nodes=[],e.btn=null,e.list=null,e.init=function(){if(e.nodes=document.querySelectorAll('[data-toggle="collapse"]'),e.nodes.length>0)for(var i=0;i<e.nodes.length;i++)e.nodes[i].addEventListener("click",t,!1),"true"==e.nodes[i].dataset.opened&&n(e.nodes[i],document.getElementById(e.nodes[i].dataset.area))};var t=function(){e.btn=this,e.list=document.getElementById(e.btn.dataset.area),"false"===e.btn.dataset.opened?n(e.btn,e.list):i(e.btn,e.list)},n=function(e,t){e.dataset.opened="true",t.dataset.height||(t.dataset.height=o(t)),t.style.height=t.dataset.height+"px"},i=function(e,t){e.dataset.opened="false",t.style.height="0"},o=function(e){for(var t=0,n=0;n<e.childNodes.length;n++)e.childNodes[n].className&&(t+=e.childNodes[n].clientHeight);return t};return e}({})},function(e,t){var n=function(){var e=function(e){var t=document.cookie.match(RegExp(e+"=([^;]*)"));return t?decodeURIComponent(t[1]).split("~")[1]:void 0},t=function(e){e=e||{};var t=e.expires;if("number"==typeof t&&t){var n=new Date;n.setTime(n.getTime()+1e3*t),t=e.expires=n}t&&t.toUTCString&&(e.expires=t.toUTCString());var i=encodeURIComponent(e.value),o=e.name+"="+i;for(var s in e)if("name"!=s&&"value"!=s){o+="; "+s;var r=e[s];!0!==r&&(o+="="+r)}document.cookie=o};return{get:e,set:t,remove:function(e){t({name:e,value:"",expires:-1,path:"/"})}}}();e.exports=n},function(e,t){e.exports=function(e){var t=[],n=null,i=function(e){t.push(e);for(var n=0;n<t.length&&t.length>5;)"confirm"!==t[n].type&&"prompt"!==t[n].type?(t[n].close(),t.splice(n,5)):n++};return e.createHolder=function(){var e=pit.draw.node("DIV","notifications-block");return n=document.body.appendChild(e),e},e.notify=function(e){function t(e){if(!e||!e.message)return void console.log("Can't create notification. Message is missed");e.type=e.type||"alert",e.time=1e3*e.time||3e3;var t=pit.draw.node("DIV","notification"),n=pit.draw.node("DIV","notification__message"),i=pit.draw.node("INPUT","notification__input"),o=pit.draw.node("SPAN","notification__confirm-btn"),g=pit.draw.node("SPAN","notification__cancel-btn"),h=pit.draw.node("DIV","notification__backdrop");n.innerHTML=e.message,e.size&&t.classList.add("notification--"+e.size),t.classList.add("notification--"+e.type),t.appendChild(n),"prompt"!==e.type&&"confirm"!==e.type||(o.textContent=e.confirmText||"ОК",g.textContent=e.cancelText||"Отмена",p=document.body.appendChild(h),p.addEventListener("click",f),"prompt"===e.type&&t.appendChild(i),t.appendChild(o),e.showCancelButton&&(t.appendChild(g),g.addEventListener("click",f)),o.addEventListener("click",m)),"prompt"!==e.type&&"confirm"!==e.type&&window.setTimeout(s,e.time),r=t,l=e.type,u=e.validation,c=e.confirm,a=e.cancel,d=i}function o(){n.appendChild(r),d.focus(),"prompt"===l||"confirm"===l?(r.classList.add("notification--animation-in"),window.setTimeout(function(){r.classList.remove("notification--animation-in")},400)):(r.classList.add("notification--animation-in-down"),window.setTimeout(function(){r.classList.remove("notification--animation-in-down")},400)),i({type:l,close:s})}function s(){"prompt"===l||"confirm"===l?r.classList.add("notification--animation-out"):r.classList.add("notification--animation-in-up"),window.setTimeout(function(){r.remove(),p&&p.remove()},400)}var r=null,a=null,l=null,c=null,d=null,p=null,u=null,m=function(){if(u||s(),"function"==typeof c)return"prompt"===l?void c(d.value):void c()},f=function(){s(),"function"==typeof a&&a()};return e&&(t(e),o()),{create:t,send:o,close:s}},e.clear=function(){n=null,t=[]},e}({})},function(e,t){},,,,,,function(e,t){},,,,,function(e,t){e.exports=function(e){function t(t){u=document.getElementsByClassName("presentation__aside-open")[0],m=document.getElementById("toggleInstruction"),f=document.getElementsByClassName("presentation")[0],g=document.getElementsByClassName("presentation__slide"),h=window.location.pathname.split("/")[3],w=document.getElementsByClassName("presentation__navigation-btn--right")[0],_=document.getElementsByClassName("presentation__navigation-btn--left")[0],y=document.getElementsByClassName("presentation__progress-bar")[0],x=""===document.getElementById("slides_order").value?[]:document.getElementById("slides_order").value.split(","),b=document.getElementsByClassName("slide-choices__action-btn");for(var i=0;i<x.length;i++)x[i]=parseInt(x[i]);if(u&&!t.aside&&u.remove(),w&&t.slideNavigation&&w.addEventListener("click",e.toNextSlide),_&&t.slideNavigation&&_.addEventListener("click",e.toPrevSlide),t.toggleAnswers)for(var i=0;i<b.length;i++)b[i].addEventListener("click",o);t.keyboard&&document.addEventListener("keydown",p),pit.cookies.get("cur_slide")&&pit.cookies.get("cur_slide").match(new RegExp(h))?(v=parseInt(pit.cookies.get("cur_slide").replace(window.location.pathname.split("/")[3],"")),x.indexOf(v)||(v=x[0])):v=x[0],l(),n()}function n(){C=[];for(var e=document.getElementsByClassName("slide-choices"),t=0;t<e.length;t++){for(var n,o,a,l=[],c=e[t].getElementsByClassName("slide-choices__option-wrapper"),d=null,p=[],u=r(c),m=0;m<c.length;m++)n=c[m].getElementsByClassName("slide-choices__option-score")[0],o=c[m].getElementsByClassName("slide-choices__option-image")[0],a=c[m].getElementsByClassName("slide-choices__option-bar")[0],d={wrapper:c[m],score:{wrapper:n,score:parseInt(n.innerHTML),bottom:parseInt(0)},img:{wrapper:o,height:o?parseFloat(o.clientWidth):0,bottom:0},bar:{wrapper:a,height:parseFloat(a.clientHeight)}},n.addEventListener("change",i),p.push(d);l={wrapper:e[t],maxScore:u,answers:p,inPercents:parseInt(e[t].getElementsByClassName("results-in-percents")[0].value)},C.push(l),s(l),window.matchMedia("(max-width: 992px)").addListener(function(){s(l)})}}function i(){s(this.closest(".slide-choices__option-wrapper"))}function o(){var e=this,t=this.parentNode.parentNode.getElementsByClassName("slide-choices__content")[0],n=this.parentNode.parentNode.getElementsByClassName("slide-choices__image")[0];e.children[0].classList.toggle("slide-choices__action-icon--open"),e.children[1].classList.toggle("hide"),e.children[2].classList.toggle("hide"),n.classList.toggle("fade__in--up"),n.classList.toggle("fade__out--down"),t.classList.toggle("fade__in--up"),t.classList.toggle("fade__out--down")}function s(e){e.maxScore=r(e.wrapper.getElementsByClassName("slide-choices__option-wrapper"));for(var t=0;t<e.answers.length;t++){var n=e.answers[t],i=e.answers[0].wrapper.clientHeight;n.img.height=void 0!==n.img.wrapper?parseFloat(n.img.wrapper.clientWidth/(i/70)):0;var o=void 0!==n.img.wrapper?n.img.height:0,s=0===n.score.score?0:parseFloat(48*n.score.score/e.maxScore-o/2);void 0===n.img.wrapper?(n.score.bottom=12+s,n.bar.height=s):(n.bar.height=s>0?s:0,n.img.bottom=s>0?12+s:12,n.score.bottom=n.img.bottom+o),n.bar.wrapper.style.height=n.bar.height+"vh",n.score.wrapper.style.bottom=n.score.bottom+"vh",n.score.wrapper.textContent=0===e.inPercents?n.score.score:parseInt(n.score.score/a(e.wrapper.getElementsByClassName("slide-choices__option-wrapper"))*100)+"%",void 0!==n.img.wrapper&&(n.img.wrapper.style.bottom=n.img.bottom+"vh")}}function r(e){for(var t=0,n=0,i=0;i<e.length;i++)n=parseInt(e[i].getElementsByClassName("slide-choices__option-score")[0].dataset.score),t=t<n?n:t;return t=0===t?1:t}function a(e){for(var t=0,n=0;n<e.length;n++)t+=parseInt(e[n].getElementsByClassName("slide-choices__option-score")[0].dataset.score);return t=0===t?1:t}function l(){pit.cookies.set({name:"cur_slide",value:"presentation~"+window.location.pathname.split("/")[3]+v,expires:21600,path:"/"});for(var e=0;e<g.length;e++)e<x.indexOf(v)?(g[e].classList.remove("presentation__slide--active","presentation__slide--after"),g[e].classList.add("presentation__slide--before","presentation__slide--inactive")):e>x.indexOf(v)&&(g[e].classList.remove("presentation__slide--active","presentation__slide--before"),g[e].classList.add("presentation__slide--after","presentation__slide--inactive"));-1!==x.indexOf(v)&&(g[x.indexOf(v)].classList.remove("presentation__slide--after","presentation__slide--before","presentation__slide--inactive"),g[x.indexOf(v)].classList.add("presentation__slide--active"),y.style.width=parseInt(x.indexOf(v)/(g.length-1)*100)+"%"),0===x.indexOf(v)?_.classList.add("hide"):_.classList.remove("hide"),x.indexOf(v)===g.length-1?w.classList.add("hide"):w.classList.remove("hide")}function c(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}function d(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function p(t){var n=t.keyCode;if(n===pit.core.keys.RIGHT||n===pit.core.keys.SPACE)return void e.toNextSlide();if(n===pit.core.keys.LEFT)return void e.toPrevSlide();if(n!==pit.core.keys.Q){if(n===pit.core.keys.I)return void e.toggleInstruction();if(n!==pit.core.keys.H){if(n===pit.core.keys.F)return void e.toggleFullScreen();pit.core.keys.C,n===pit.core.keys.E&&(window.history.pushState("Presentation",window.location),window.location.replace(window.location+"/edit"))}}}var u=null,m=null,f=null,g=null,h=null,v=null,w=null,_=null,y=null,b=null,x=null,C=null;return e.addScore=function(e,t){C[e].answers[t].score.score+=1,C[e].answers[t].score.wrapper.dataset.score=C[e].answers[t].score.score,s(C[e])},e.toNextSlide=function(){x.indexOf(v)<g.length-1&&(v=x[x.indexOf(v)+1],l(),pit.core.log("Switch to the next slide","log","presentation"))},e.toPrevSlide=function(){x.indexOf(v)>0&&(v=x[x.indexOf(v)-1],l(),pit.core.log("Switch to the previous slide","log","presentation"))},e.toggleFullScreen=function(){f?"true"===f.dataset.fullscreen?(f.dataset.fullscreen=!1,d()):(f.dataset.fullscreen=!0,c(f)):pit.core.log("Full screen button doesn't exist","error","presentation")},e.toggleInstruction=function(){m?"false"===m.dataset.opened?(m.classList.toggle("hide"),m.classList.contains("hide")||(m.children[1].removeAttribute("data-height"),m.click())):m.click():pit.core.log("Instructions doesn't exist","error","presentation")},e.init=function(e){t(e),pit.core.log("Module loaded","log","presentation")},e}({})},,,,function(e,t,n){n(4),n(10),e.exports=function(e){return e.core=n(0),e.cookies=n(2),e.notification=n(3),e.collapse=n(1),e.present=n(15),e}({})}]);